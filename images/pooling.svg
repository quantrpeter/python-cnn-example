<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 500">
  <!-- Title -->
  <text x="450" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">Pooling Operations</text>
  
  <!-- Input Image -->
  <g id="input">
    <text x="140" y="70" font-size="16" font-weight="bold" fill="#333">Input (4×4)</text>
    <rect x="60" y="80" width="160" height="160" fill="none" stroke="#666" stroke-width="2"/>
    <!-- Grid lines -->
    <line x1="60" y1="120" x2="220" y2="120" stroke="#999" stroke-width="2"/>
    <line x1="60" y1="160" x2="220" y2="160" stroke="#999" stroke-width="2"/>
    <line x1="60" y1="200" x2="220" y2="200" stroke="#999" stroke-width="2"/>
    <line x1="100" y1="80" x2="100" y2="240" stroke="#999" stroke-width="2"/>
    <line x1="140" y1="80" x2="140" y2="240" stroke="#999" stroke-width="2"/>
    <line x1="180" y1="80" x2="180" y2="240" stroke="#999" stroke-width="2"/>
    
    <!-- Values with colors -->
    <rect x="60" y="80" width="40" height="40" fill="rgba(255, 182, 193, 0.6)"/>
    <text x="80" y="105" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">1</text>
    <rect x="100" y="80" width="40" height="40" fill="rgba(255, 105, 97, 0.6)"/>
    <text x="120" y="105" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">3</text>
    <rect x="140" y="80" width="40" height="40" fill="rgba(173, 216, 230, 0.6)"/>
    <text x="160" y="105" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">2</text>
    <rect x="180" y="80" width="40" height="40" fill="rgba(255, 215, 0, 0.6)"/>
    <text x="200" y="105" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">4</text>
    
    <rect x="60" y="120" width="40" height="40" fill="rgba(255, 215, 0, 0.8)"/>
    <text x="80" y="145" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">5</text>
    <rect x="100" y="120" width="40" height="40" fill="rgba(255, 69, 0, 0.7)"/>
    <text x="120" y="145" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">6</text>
    <rect x="140" y="120" width="40" height="40" fill="rgba(144, 238, 144, 0.6)"/>
    <text x="160" y="145" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">1</text>
    <rect x="180" y="120" width="40" height="40" fill="rgba(173, 216, 230, 0.6)"/>
    <text x="200" y="145" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">2</text>
    
    <rect x="60" y="160" width="40" height="40" fill="rgba(255, 140, 0, 0.6)"/>
    <text x="80" y="185" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">7</text>
    <rect x="100" y="160" width="40" height="40" fill="rgba(255, 69, 0, 0.8)"/>
    <text x="120" y="185" font-size="16" text-anchor="middle" fill="#fff" font-weight="bold">8</text>
    <rect x="140" y="160" width="40" height="40" fill="rgba(255, 105, 97, 0.6)"/>
    <text x="160" y="185" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">3</text>
    <rect x="180" y="160" width="40" height="40" fill="rgba(255, 182, 193, 0.6)"/>
    <text x="200" y="185" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">1</text>
    
    <rect x="60" y="200" width="40" height="40" fill="rgba(173, 216, 230, 0.6)"/>
    <text x="80" y="225" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">2</text>
    <rect x="100" y="200" width="40" height="40" fill="rgba(144, 238, 144, 0.6)"/>
    <text x="120" y="225" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">1</text>
    <rect x="140" y="200" width="40" height="40" fill="rgba(255, 215, 0, 0.6)"/>
    <text x="160" y="225" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">4</text>
    <rect x="180" y="200" width="40" height="40" fill="rgba(255, 215, 0, 0.8)"/>
    <text x="200" y="225" font-size="16" text-anchor="middle" fill="#333" font-weight="bold">5</text>
    
    <!-- Highlight 2x2 regions -->
    <rect x="60" y="80" width="80" height="80" fill="none" stroke="#E74C3C" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="140" y="80" width="80" height="80" fill="none" stroke="#3498DB" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="60" y="160" width="80" height="80" fill="none" stroke="#9B59B6" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="140" y="160" width="80" height="80" fill="none" stroke="#F39C12" stroke-width="3" stroke-dasharray="5,5"/>
  </g>
  
  <!-- Arrow down -->
  <path d="M 140 260 L 140 290" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="150" y="280" font-size="14" fill="#666">2×2 Max Pool</text>
  
  <!-- Max Pooling Output -->
  <g id="max-pool">
    <text x="140" y="320" font-size="18" font-weight="bold" fill="#E74C3C">Max Pooling (2×2)</text>
    <rect x="80" y="330" width="120" height="120" fill="none" stroke="#E74C3C" stroke-width="2"/>
    <line x1="80" y1="390" x2="200" y2="390" stroke="#E74C3C" stroke-width="2"/>
    <line x1="140" y1="330" x2="140" y2="450" stroke="#E74C3C" stroke-width="2"/>
    
    <!-- Max values with highlights -->
    <rect x="80" y="330" width="60" height="60" fill="rgba(255, 69, 0, 0.3)"/>
    <text x="110" y="365" font-size="20" text-anchor="middle" fill="#E74C3C" font-weight="bold">6</text>
    <text x="110" y="380" font-size="10" text-anchor="middle" fill="#999">max(1,3,5,6)</text>
    
    <rect x="140" y="330" width="60" height="60" fill="rgba(255, 215, 0, 0.3)"/>
    <text x="170" y="365" font-size="20" text-anchor="middle" fill="#E74C3C" font-weight="bold">4</text>
    <text x="170" y="380" font-size="10" text-anchor="middle" fill="#999">max(2,4,1,2)</text>
    
    <rect x="80" y="390" width="60" height="60" fill="rgba(255, 69, 0, 0.3)"/>
    <text x="110" y="425" font-size="20" text-anchor="middle" fill="#E74C3C" font-weight="bold">8</text>
    <text x="110" y="440" font-size="10" text-anchor="middle" fill="#999">max(7,8,2,1)</text>
    
    <rect x="140" y="390" width="60" height="60" fill="rgba(255, 215, 0, 0.3)"/>
    <text x="170" y="425" font-size="20" text-anchor="middle" fill="#E74C3C" font-weight="bold">5</text>
    <text x="170" y="440" font-size="10" text-anchor="middle" fill="#999">max(3,1,4,5)</text>
  </g>
  
  <!-- Divider -->
  <line x1="280" y1="60" x2="280" y2="460" stroke="#ddd" stroke-width="2"/>
  
  <!-- Right side - Average Pooling -->
  <g id="input2">
    <text x="460" y="70" font-size="16" font-weight="bold" fill="#333">Input (4×4)</text>
    <rect x="380" y="80" width="160" height="160" fill="none" stroke="#666" stroke-width="2"/>
    <!-- Grid lines -->
    <line x1="380" y1="120" x2="540" y2="120" stroke="#999" stroke-width="2"/>
    <line x1="380" y1="160" x2="540" y2="160" stroke="#999" stroke-width="2"/>
    <line x1="380" y1="200" x2="540" y2="200" stroke="#999" stroke-width="2"/>
    <line x1="420" y1="80" x2="420" y2="240" stroke="#999" stroke-width="2"/>
    <line x1="460" y1="80" x2="460" y2="240" stroke="#999" stroke-width="2"/>
    <line x1="500" y1="80" x2="500" y2="240" stroke="#999" stroke-width="2"/>
    
    <!-- Same values -->
    <rect x="380" y="80" width="40" height="40" fill="rgba(100, 149, 237, 0.3)"/>
    <text x="400" y="105" font-size="16" text-anchor="middle" fill="#333">1</text>
    <rect x="420" y="80" width="40" height="40" fill="rgba(100, 149, 237, 0.3)"/>
    <text x="440" y="105" font-size="16" text-anchor="middle" fill="#333">3</text>
    <rect x="460" y="80" width="40" height="40" fill="rgba(100, 200, 150, 0.3)"/>
    <text x="480" y="105" font-size="16" text-anchor="middle" fill="#333">2</text>
    <rect x="500" y="80" width="40" height="40" fill="rgba(100, 200, 150, 0.3)"/>
    <text x="520" y="105" font-size="16" text-anchor="middle" fill="#333">4</text>
    
    <rect x="380" y="120" width="40" height="40" fill="rgba(100, 149, 237, 0.3)"/>
    <text x="400" y="145" font-size="16" text-anchor="middle" fill="#333">5</text>
    <rect x="420" y="120" width="40" height="40" fill="rgba(100, 149, 237, 0.3)"/>
    <text x="440" y="145" font-size="16" text-anchor="middle" fill="#333">6</text>
    <rect x="460" y="120" width="40" height="40" fill="rgba(100, 200, 150, 0.3)"/>
    <text x="480" y="145" font-size="16" text-anchor="middle" fill="#333">1</text>
    <rect x="500" y="120" width="40" height="40" fill="rgba(100, 200, 150, 0.3)"/>
    <text x="520" y="145" font-size="16" text-anchor="middle" fill="#333">2</text>
    
    <rect x="380" y="160" width="40" height="40" fill="rgba(150, 100, 200, 0.3)"/>
    <text x="400" y="185" font-size="16" text-anchor="middle" fill="#333">7</text>
    <rect x="420" y="160" width="40" height="40" fill="rgba(150, 100, 200, 0.3)"/>
    <text x="440" y="185" font-size="16" text-anchor="middle" fill="#333">8</text>
    <rect x="460" y="160" width="40" height="40" fill="rgba(200, 150, 100, 0.3)"/>
    <text x="480" y="185" font-size="16" text-anchor="middle" fill="#333">3</text>
    <rect x="500" y="160" width="40" height="40" fill="rgba(200, 150, 100, 0.3)"/>
    <text x="520" y="185" font-size="16" text-anchor="middle" fill="#333">1</text>
    
    <rect x="380" y="200" width="40" height="40" fill="rgba(150, 100, 200, 0.3)"/>
    <text x="400" y="225" font-size="16" text-anchor="middle" fill="#333">2</text>
    <rect x="420" y="200" width="40" height="40" fill="rgba(150, 100, 200, 0.3)"/>
    <text x="440" y="225" font-size="16" text-anchor="middle" fill="#333">1</text>
    <rect x="460" y="200" width="40" height="40" fill="rgba(200, 150, 100, 0.3)"/>
    <text x="480" y="225" font-size="16" text-anchor="middle" fill="#333">4</text>
    <rect x="500" y="200" width="40" height="40" fill="rgba(200, 150, 100, 0.3)"/>
    <text x="520" y="225" font-size="16" text-anchor="middle" fill="#333">5</text>
    
    <!-- Highlight 2x2 regions -->
    <rect x="380" y="80" width="80" height="80" fill="none" stroke="#3498DB" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="460" y="80" width="80" height="80" fill="none" stroke="#27AE60" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="380" y="160" width="80" height="80" fill="none" stroke="#9B59B6" stroke-width="3" stroke-dasharray="5,5"/>
    <rect x="460" y="160" width="80" height="80" fill="none" stroke="#E67E22" stroke-width="3" stroke-dasharray="5,5"/>
  </g>
  
  <!-- Arrow down -->
  <path d="M 460 260 L 460 290" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="470" y="280" font-size="14" fill="#666">2×2 Avg Pool</text>
  
  <!-- Average Pooling Output -->
  <g id="avg-pool">
    <text x="460" y="320" font-size="18" font-weight="bold" fill="#3498DB">Average Pooling (2×2)</text>
    <rect x="400" y="330" width="120" height="120" fill="none" stroke="#3498DB" stroke-width="2"/>
    <line x1="400" y1="390" x2="520" y2="390" stroke="#3498DB" stroke-width="2"/>
    <line x1="460" y1="330" x2="460" y2="450" stroke="#3498DB" stroke-width="2"/>
    
    <!-- Average values -->
    <rect x="400" y="330" width="60" height="60" fill="rgba(100, 149, 237, 0.2)"/>
    <text x="430" y="365" font-size="20" text-anchor="middle" fill="#3498DB" font-weight="bold">3.75</text>
    <text x="430" y="380" font-size="10" text-anchor="middle" fill="#999">avg(1,3,5,6)</text>
    
    <rect x="460" y="330" width="60" height="60" fill="rgba(100, 200, 150, 0.2)"/>
    <text x="490" y="365" font-size="20" text-anchor="middle" fill="#3498DB" font-weight="bold">2.25</text>
    <text x="490" y="380" font-size="10" text-anchor="middle" fill="#999">avg(2,4,1,2)</text>
    
    <rect x="400" y="390" width="60" height="60" fill="rgba(150, 100, 200, 0.2)"/>
    <text x="430" y="425" font-size="20" text-anchor="middle" fill="#3498DB" font-weight="bold">4.5</text>
    <text x="430" y="440" font-size="10" text-anchor="middle" fill="#999">avg(7,8,2,1)</text>
    
    <rect x="460" y="390" width="60" height="60" fill="rgba(200, 150, 100, 0.2)"/>
    <text x="490" y="425" font-size="20" text-anchor="middle" fill="#3498DB" font-weight="bold">3.25</text>
    <text x="490" y="440" font-size="10" text-anchor="middle" fill="#999">avg(3,1,4,5)</text>
  </g>
  
  <!-- Comparison note -->
  <rect x="620" y="80" width="260" height="370" fill="#f8f9fa" stroke="#ddd" stroke-width="1" rx="5"/>
  <text x="750" y="110" font-size="16" font-weight="bold" text-anchor="middle" fill="#333">Key Differences</text>
  
  <text x="640" y="140" font-size="14" font-weight="bold" fill="#E74C3C">Max Pooling:</text>
  <text x="640" y="160" font-size="12" fill="#555">• Selects maximum value</text>
  <text x="640" y="180" font-size="12" fill="#555">• Preserves strongest features</text>
  <text x="640" y="200" font-size="12" fill="#555">• More commonly used</text>
  <text x="640" y="220" font-size="12" fill="#555">• Better for edge detection</text>
  <text x="640" y="240" font-size="12" fill="#555">• Creates sparse activation</text>
  
  <text x="640" y="280" font-size="14" font-weight="bold" fill="#3498DB">Average Pooling:</text>
  <text x="640" y="300" font-size="12" fill="#555">• Computes average value</text>
  <text x="640" y="320" font-size="12" fill="#555">• Smoother down-sampling</text>
  <text x="640" y="340" font-size="12" fill="#555">• Used in final layers</text>
  <text x="640" y="360" font-size="12" fill="#555">• Retains more information</text>
  <text x="640" y="380" font-size="12" fill="#555">• Less sensitive to outliers</text>
  
  <text x="750" y="415" font-size="13" font-weight="bold" text-anchor="middle" fill="#666">Both reduce spatial size by half</text>
  <text x="750" y="435" font-size="12" text-anchor="middle" fill="#888" font-style="italic">(4×4 → 2×2 with stride 2)</text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#666" />
    </marker>
  </defs>
</svg>
